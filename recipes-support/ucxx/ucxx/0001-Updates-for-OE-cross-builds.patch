From 821329975c0b54409790e515dac659c5e9d520b6 Mon Sep 17 00:00:00 2001
From: Ilies CHERGUI <ichergui@nvidia.com>
Date: Thu, 4 Sep 2025 21:12:48 +0100
Subject: [PATCH] Updates for OE cross builds

Upstream-Status: Inappropriate [OE-specific]
Signed-off-by: Ilies CHERGUI <ichergui@nvidia.com>
---
 RAPIDS_VERSION            |  2 +-
 cmake/rapids_config.cmake | 13 ++++++++++++-
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/RAPIDS_VERSION b/RAPIDS_VERSION
index cc83d7a..af28c42 100644
--- a/RAPIDS_VERSION
+++ b/RAPIDS_VERSION
@@ -1 +1 @@
-25.06.00
+24.12.00
diff --git a/cmake/rapids_config.cmake b/cmake/rapids_config.cmake
index 0051673..8253620 100644
--- a/cmake/rapids_config.cmake
+++ b/cmake/rapids_config.cmake
@@ -26,5 +26,16 @@ else()
   )
 endif()
 
+set(CPM_DOWNLOAD_VERSION 0.40.0)
+set(CPM_DOWNLOAD_LOCATION "${CPM_SOURCE_CACHE}/cpm/CPM_${CPM_DOWNLOAD_VERSION}.cmake")
+message(STATUS "CPM download location: ${CPM_DOWNLOAD_LOCATION}")
+
+if(NOT EXISTS "${RAPIDS_CMAKE_DIR}/RAPIDS.cmake")
+  message(FATAL_ERROR "Required RAPIDS.cmake does not exist!")
+endif()
+set(rapids-cmake_POPULATED "TRUE")
 set(rapids-cmake-version "${RAPIDS_VERSION_MAJOR_MINOR}")
-include("${CMAKE_CURRENT_LIST_DIR}/RAPIDS.cmake")
+list(APPEND CMAKE_MODULE_PATH "${RAPIDS_CMAKE_DIR}/rapids-cmake")
+
+set(rapids-cmake-dir "${RAPIDS_CMAKE_DIR}/rapids-cmake")
+include("${RAPIDS_CMAKE_DIR}/RAPIDS.cmake")
-- 
2.34.1

